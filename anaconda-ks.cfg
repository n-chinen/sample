# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
url --url=ftp://10.44.62.1/rhel65
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto dhcp --noipv6
network --onboot no --device eth1 --noipv4 --noipv6
network --onboot no --device eth2 --noipv4 --noipv6
network --onboot no --device eth3 --noipv4 --noipv6
network --onboot no --device eth4 --noipv4 --noipv6
network --onboot no --device eth5 --noipv4 --noipv6
network --onboot no --device eth6 --noipv4 --noipv6
network --onboot no --device eth7 --noipv4 --noipv6
rootpw  --iscrypted $6$ZH8h0I2mN0bAolNj$h5GvJss4GOPNVCIxNWi8DqDIdXjilRBLVVH4pJ1SUiU6Dev2cr296uHmgf6EtWmFiklo2U7xwFIgbeX.QQ/jr.
# Reboot after installation
reboot
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512 --enablefingerprint
selinux --enforcing
timezone --utc Asia/Tokyo
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto console=ttyS0,9600n8"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
#clearpart --all --initlabel
#volgroup VolGroup --pesize=4096 pv.008002
#logvol /home --fstype=ext4 --name=lv_home --vgname=VolGroup --grow --size=100
#logvol / --fstype=ext4 --name=lv_root --vgname=VolGroup --grow --size=1024 --maxsize=51200
#logvol swap --name=lv_swap --vgname=VolGroup --grow --size=8040 --maxsize=8040

#part /boot --fstype=ext4 --size=500
#part pv.008002 --grow --size=1


%packages
@Base
@Core
@base
@basic-desktop
@console-internet
@core
@debugging
@development
@directory-client
@directory-server
@ftp-server
@graphical-admin-tools
@hardware-monitoring
@internet-browser
@japanese-support
@java-platform
@kde-desktop
@large-systems
@legacy-unix
@legacy-x
@mysql
@mysql-client
@network-file-system-client
@network-server
@nfs-file-server
@performance
@perl-runtime
@php
@server-platform
@server-policy
@storage-client-iscsi
@storage-server
@system-admin-tools
@system-management
@system-management-snmp
@web-server
@x11
certmonger
crypto-utils
dnsmasq
genisoimage
krb5-workstation
libXmu
mtools
nscd
nss-pam-ldapd
oddjob
pam_krb5
pam_ldap
pax
perl-DBD-MySQL
perl-DBD-SQLite
python-dmidecode
sgpio
tcp_wrappers
wodim
xorg-x11-xdm
xterm

%end

%post
chkconfig iptables off
chkconfig httpd on

rm -f /etc/rc.local.orig
rm -f /etc/rc.local.mod
cp /etc/rc.local /etc/rc.local.orig
#set the hostname(using MAC) in rc.local.orig
echo "#Setting hostname" >> /etc/rc.local.orig
echo "T=\`ifconfig eth0 | grep HWaddr | awk '{print \$5}'\`" >> /etc/rc.local.orig
echo "A=\`echo \$T | sed 's/://g'\`" >> /etc/rc.local.orig
echo "O=\`echo \${A:9}\`" >> /etc/rc.local.orig
echo "SRV_ID=\`echo \$((8#\$O))\`" >> /etc/rc.local.orig
echo "hostname EGGMAN-SERVER-\$SRV_ID" >> /etc/rc.local.orig
echo "echo \"nohup yum list > /dev/null &\" >> /etc/rc.local.orig"
echo "grep -v ttyS0 /etc/inittab > /tmp/inittab" >> /etc/rc.local
echo "echo \"co:2345:respawn:/sbin/mingetty --autologin root ttyS0 9600 vt100-nav\" >> /tmp/inittab" >> /etc/rc.local
echo "mv -f /tmp/inittab /etc/inittab" >> /etc/rc.local
echo "mv -f /etc/rc.local.orig /etc/rc.d/rc.local" >> /etc/rc.local
echo "reboot" >> /etc/rc.local
cp /etc/rc.local /etc/rc.local.mod
%end
